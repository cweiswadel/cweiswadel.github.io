<!DOCTYPE html>
<html>
    <title> listContentTEST -- CWEISWADEL.GITHUB>IO</title>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
    <h1>Listing Content from the Git Hub Repo</h1>
    <!-- <div id="listContent"></div>
    <script src="./util/listContentGitAPI.js"></script> -->

    <h4> Raw String output of request</h4>
    <div id="listContent_outStr"></div>
    <div id="listContent_arrNames"></div>
    <div id="listContent"></div>
    <script type="module" id="apiCallScript"> 
        import { request } from "https://cdn.skypack.dev/@octokit/request"; 
        // import { list }
        const ghOwner = "cweiswadel", ghRepo = "cweiswadel.github.io";
        console.log(`ghOwner = ${ghOwner} \n ghRepo = ${ghRepo}`);

        // var apiCall = await octokit.request(`GET /repos/${ghOwner}/${ghRepo}/contents/`);
        //https://api.github.com/repos/cweiswadel/cweiswadel.github.io/contents/

        const reqRes = await request('GET /repos/{owner}/{repo}/contents/{path}', {
            owner: ghOwner,
            repo: ghRepo
        })

        // console.log(`reqRes.data = ${reqRes.data}`);
        

        // console.log(`apiCall = ${apiCall} \n typeof apiCall = ${typeof apiCall}`);
        const outObj = reqRes.data;
        console.log(`typeof outObj = \n ${typeof outObj}`);
        var outStr = JSON.stringify(outObj, null, 2); // spacing level = 2 & pretty printing for JSON 
        console.log(`outStr = \n ${outStr}`);

        var arrNames = [];
        var contentName = outObj.forEach(function(obj){
            arrNames.push(obj.name);
        });
        console.log(`arrName = ${arrNames}`);


        // document.getElementById('listContent_outStr').innerHTML = outStr;
        document.getElementById('listContent_arrNames').innerHTML = arrNames;
        
    </script>

    <div id="listContentFromJS"></div>
    <script src="./util/listContentGitAPI.js"></script>

</body>

<div id="homeButton"></div>
<script src="./util/goHome.js"></script>

</html>